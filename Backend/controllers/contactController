const { default: mongoose } = require('mongoose')
const Contact = require('../models/ContactModel')

//get all contacts
const getContacts=async(req,res)=>{
    const contacts = await Contact.find({}).sort({createdAt:-1})

    res.status(200).json(contacts)
}

//get a single contact
const getContact = async(req,res)=>{
    const{id} = req.params
    if(!mongoose.Types.ObjectId.isValid(id)){
        return res.status(404).json({error: 'No such contact'})
    }
    const contact = await Contact.findById(id)
    if(!contact){
        return res.status(404).json({error: 'No such contact'})
    }
    res.status(200).json(contact)
}


//create new contact
const createContact=async (req,res)=>{
    const{firstname,lastname,phonenumber}=req.body

try{
    const contact = await Contact.create({firstname,lastname,phonenumber})
    res.status(200).json(contact)
}catch (error){
    res.status(400).json({error:error.message})
}
}

//delete a contact 
const deleteContact =async (req,res)=>{
 
}

//update a contact
 const updateContact=async(req,res)=>{
  
 }
module.exports ={
    createContact,
    getContacts,
    getContact,
    deleteContact,
    updateContact
}